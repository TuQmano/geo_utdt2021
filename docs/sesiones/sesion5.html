<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Instrumentos de Análisis Urbanos II</title>
    <meta charset="utf-8" />
    <meta name="date" content="2021-06-07" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <script type="application/json" id="xaringanExtra-editable-docid">{"id":"e84ded5473b64ef4992d1805d6794761","expires":14}</script>
    <script src="libs/himalaya/himalaya.js"></script>
    <script src="libs/js-cookie/js.cookie.js"></script>
    <link href="libs/editable/editable.css" rel="stylesheet" />
    <script src="libs/editable/editable.js"></script>
    <script src="libs/xaringanExtra-webcam/webcam.js"></script>
    <script id="xaringanExtra-webcam-options" type="application/json">{"width":"200","height":"200","margin":"1em"}</script>
    <script src="libs/peerjs/peerjs.min.js"></script>
    <script src="libs/tiny.toast/toast.min.js"></script>
    <link href="libs/xaringanExtra-broadcast/broadcast.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-broadcast/broadcast.js"></script>
    <script src="libs/fabric/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <script src="libs/xaringanExtra-progressBar/progress-bar.js"></script>
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="footer-header.css" type="text/css" />
    <link rel="stylesheet" href="styles.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Instrumentos de Análisis Urbanos II
## Maestría en Economía Urbana
### 
### Universidad Torcuato Di Tella
### 06/07/2021

---


layout: true
  
&lt;div class="my-footer"&gt;&lt;span&gt;Juan Pablo Ruiz Nicolini | @TuQmano | &lt;a href="https://tuqmano.ar/"&gt;www.tuqmano.ar&lt;/a&gt;&lt;/span&gt;&lt;/div&gt; 







<style>.xe__progress-bar__container {
  top:0;
  opacity: 1;
  position:absolute;
  right:0;
  left: 0;
}
.xe__progress-bar {
  height: 0.25em;
  background-color: #fdbd15;
  width: calc(var(--slide-current) / var(--slide-total) * 100%);
}
.remark-visible .xe__progress-bar {
  animation: xe__progress-bar__wipe 200ms forwards;
  animation-timing-function: cubic-bezier(.86,0,.07,1);
}
@keyframes xe__progress-bar__wipe {
  0% { width: calc(var(--slide-previous) / var(--slide-total) * 100%); }
  100% { width: calc(var(--slide-current) / var(--slide-total) * 100%); }
}</style>
---

class: inverse


# DUDAS SLACK

### (1)  ¿ Se pueden levnatar `SHP` desde _GitHub_ ? 

--

### **NI** -&gt; `"scripts/leer_shp_online.R"`


---
class: inverse

# DUDAS SLACK

### (2)  ¿Cómo lidiar con archivos muy pesados en control de versiones _GitHub_ ? 

--

### `-&gt; .gitignore`
 
--
 
### `zip`

--

### `.rds` -&gt; 

&lt;https://roelandtn.frama.io/post/saverds-vs-write-csv&gt;

---

class: inverse

# DUDAS SLACK

### (3) _Output_ de `st_intesection()`

--

#### HOY : &lt;https://geocompr.robinlovelace.net/spatial-operations.html&gt;

---

class: inverse, center, middle

# Sesion 5

## Domar los Datos III

###  `geo`



---

class: inverse

## <i class="fas  fa-book "></i> Referencias

* R - Spatial:  &lt;https://www.r-spatial.org/&gt;

* [Geocomputation with R](https://geocompr.robinlovelace.net/), Robin Lovelace, Jakub Nowosad, Jannes Muenchow (2019)

* [Spatial Data Science](https://keen-swartz-3146c4.netlify.app/), Edzer Pebesma y Roger Bivand.

---
class: inverse, middle

# _useR 2021_: Pebesma

* Video: https://youtu.be/O8V4QJ13Gjc

* Slides: https://edzer.github.io/UseR2021/#1


---

## Universo _geo_ (desde `R`)

&lt;img src="https://keen-swartz-3146c4.netlify.app/images/sf_deps.png" width="80%" /&gt;

Fuente: [_Spatial Data Science_](https://keen-swartz-3146c4.netlify.app/)

---

### Geometrías

&lt;img src="sesion5_files/figure-html/unnamed-chunk-2-1.png" width="60%" /&gt;

Fuente: [_Spatial Data Science_](https://keen-swartz-3146c4.netlify.app/geometries.html) (ver detalle)

---

### Operaciones - [Spatial Data Science](https://keen-swartz-3146c4.netlify.app/geometries.html#opgeom)

#### INPUTS

--

* `predicates`: una consulta lógica para determinar si una propiedad es  `TRUE` 

 - `is.empty()`
--

* `measures`: una cantidad (e.g. un valor númerico con una unidad de medida determinada)

 - `area()`
--

* `transformations`: generación de nuevas geometrías 

 - `centroid()`



---

### Operaciones - [Spatial Data Science](https://keen-swartz-3146c4.netlify.app/geometries.html#opgeom)


#### SOBRE QUE OPERAN


--


* `unary`: una única _geometry_



* `binary`: pares de _geometry_



* `n-ary`: conjunto de _geometries_


&lt;https://keen-swartz-3146c4.netlify.app/geometries.html#opgeom&gt;

---

### Proyecciones
 

&lt;img src="sesion5_files/figure-html/unnamed-chunk-3-1.png" width="60%" /&gt;

Fuente: Pebezma - useR (2021)

---

### Proyecciones

&lt;img src="sesion5_files/figure-html/unnamed-chunk-4-1.png" width="60%" /&gt;

Fuente: Pebezma - useR (2021)


---

class: inverse, middle

# Hoja de ruta

1. `{sf}` / _RSpatial_

--

2. `{geoAr}`

--

3. `{rmapshaper}`


---


background-image: url(https://user-images.githubusercontent.com/520851/34887433-ce1d130e-f7c6-11e7-83fc-d60ad4fae6bd.gif)
background-position: 95% 5%
background-size: 10%



### Datos Espaciales Simplificados

&lt;img src="https://user-images.githubusercontent.com/520851/50280460-e35c1880-044c-11e9-9ed7-cc46754e49db.jpg" width="80%" /&gt;

---


background-image: url(https://user-images.githubusercontent.com/520851/34887433-ce1d130e-f7c6-11e7-83fc-d60ad4fae6bd.gif)
background-position: 95% 5%
background-size: 10%


## _Simple Features_ 


&lt;img src="https://keen-swartz-3146c4.netlify.app/images/sf_obj.png" width="80%" /&gt;




[<i class="fas  fa-link "></i>`{sf}`](https://r-spatial.github.io/sf/)


---

background-image: url(https://github.com/PoliticaArgentina/data_warehouse/raw/master/hex/geoAr.png)
background-position: 95% 5%
background-size: 10%

class: inverse, center, middle

## Geometrías Argentinas


```r

# install.packages('devtools') si no tiene instalado devtools

devtools::install_github("politicaargentina/geoAr")

```

---

background-image: url(https://github.com/PoliticaArgentina/data_warehouse/raw/master/hex/geoAr.png)
background-position: 95% 5%
background-size: 10%


## Geometrías Argentinas

### Diccionario  - [show_arg_codes()](https://politicaargentina.github.io/geoAr/index.html)


--


```r
library(geoAr)

show_arg_codes()
## # A tibble: 26 x 5
##    id           codprov codprov_censo codprov_iso name_iso                      
##    &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;                         
##  1 ARGENTINA    " "     " "           AR          Argentina                     
##  2 CABA         "01"    "02"          AR-C        Ciudad Autónoma de Buenos Air~
##  3 BUENOS AIRES "02"    "06"          AR-B        Buenos Aires                  
##  4 CATAMARCA    "03"    "10"          AR-K        Catamarca                     
##  5 CORDOBA      "04"    "14"          AR-X        Córdoba                       
##  6 CORRIENTES   "05"    "18"          AR-W        Corrientes                    
##  7 CHACO        "06"    "22"          AR-H        Chaco                         
##  8 CHUBUT       "07"    "26"          AR-U        Chubut                        
##  9 ENTRE RIOS   "08"    "30"          AR-E        Entre Ríos                    
## 10 FORMOSA      "09"    "34"          AR-P        Formosa                       
## # ... with 16 more rows
```


---

background-image: url(https://github.com/PoliticaArgentina/data_warehouse/raw/master/hex/geoAr.png)
background-position: 95% 5%
background-size: 10%


## Geometrías Argentinas 

### Diccionario (**departamentos**) - [show_arg_codes()](https://politicaargentina.github.io/geoAr/index.html)

--


```r
library(geoAr)

show_arg_codes(nivel = "departamentos")
## # A tibble: 527 x 6
##    id        codprov coddepto codprov_censo coddepto_censo nomdepto_censo
##    &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         
##  1 ARGENTINA " "     " "      " "           " "            " "           
##  2 CABA      "01"    "001"    "02"          "001"          "COMUNA 01"   
##  3 CABA      "01"    "002"    "02"          "002"          "COMUNA 02"   
##  4 CABA      "01"    "003"    "02"          "003"          "COMUNA 03"   
##  5 CABA      "01"    "004"    "02"          "004"          "COMUNA 04"   
##  6 CABA      "01"    "005"    "02"          "005"          "COMUNA 05"   
##  7 CABA      "01"    "006"    "02"          "006"          "COMUNA 06"   
##  8 CABA      "01"    "007"    "02"          "007"          "COMUNA 07"   
##  9 CABA      "01"    "008"    "02"          "008"          "COMUNA 08"   
## 10 CABA      "01"    "009"    "02"          "009"          "COMUNA 09"   
## # ... with 517 more rows
```



---

background-image: url(https://github.com/PoliticaArgentina/data_warehouse/raw/master/hex/geoAr.png)
background-position: 95% 5%
background-size: 10%


## Geometrías Argentinas 

### Obtener poligonos  - [get_geo()](https://politicaargentina.github.io/geoAr/index.html)

--


```r

get_geo(geo = "TUCUMAN")
## Simple feature collection with 17 features and 2 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -66.18101 ymin: -28.01575 xmax: -64.48315 ymax: -26.06037
## Geodetic CRS:  WGS 84
## # A tibble: 17 x 3
##    codprov_censo coddepto_censo                                         geometry
##  * &lt;chr&gt;         &lt;chr&gt;                                        &lt;MULTIPOLYGON [°]&gt;
##  1 90            007            (((-64.49919 -26.23353, -64.49857 -26.26325, -6~
##  2 90            014            (((-65.13782 -26.74975, -65.10095 -26.75771, -6~
##  3 90            021            (((-65.94729 -27.08444, -65.93885 -27.0989, -65~
##  4 90            028            (((-65.62733 -26.87134, -65.62598 -26.84177, -6~
##  5 90            035            (((-65.47532 -27.53838, -65.43503 -27.5425, -65~
##  6 90            042            (((-65.51768 -27.54528, -65.53685 -27.62278, -6~
##  7 90            049            (((-65.51348 -27.62978, -65.52091 -27.66553, -6~
##  8 90            056            (((-65.12933 -27.02488, -65.12589 -27.01659, -6~
##  9 90            063            (((-65.43583 -26.83751, -65.38124 -26.84196, -6~
## 10 90            070            (((-65.86853 -26.99852, -65.85796 -27.01388, -6~
## 11 90            077            (((-65.93481 -27.39544, -65.89887 -27.3702, -65~
## 12 90            084            (((-65.16293 -26.82289, -65.18562 -26.86204, -6~
## 13 90            091            (((-65.33499 -27.20478, -65.33462 -27.21948, -6~
## 14 90            098            (((-66.08361 -26.23547, -66.06621 -26.23792, -6~
## 15 90            105            (((-65.70111 -26.52317, -65.65078 -26.5263, -65~
## 16 90            112            (((-65.52483 -26.09667, -65.4682 -26.09253, -65~
## 17 90            119            (((-65.27025 -26.84087, -65.28587 -26.83549, -6~
```





---

background-image: url(https://github.com/PoliticaArgentina/data_warehouse/raw/master/hex/geoAr.png)
background-position: 95% 5%
background-size: 10%


## Geometrías Argentinas  **raw**

### Obtener poligonos  - [get_geo()](https://politicaargentina.github.io/geoAr/index.html)

--


```r

(TUCUMAN &lt;- get_geo(geo = "TUCUMAN", 
*                   simplified = FALSE))
## Simple feature collection with 17 features and 2 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -66.18101 ymin: -28.01579 xmax: -64.48315 ymax: -26.05908
## Geodetic CRS:  WGS 84
## # A tibble: 17 x 3
##    codprov_censo coddepto_censo                                         geometry
##  * &lt;chr&gt;         &lt;chr&gt;                                        &lt;MULTIPOLYGON [°]&gt;
##  1 90            007            (((-64.49901 -26.21797, -64.49802 -26.21785, -6~
##  2 90            014            (((-65.15839 -26.75995, -65.15823 -26.75983, -6~
##  3 90            021            (((-65.97171 -27.06826, -65.96785 -27.07572, -6~
##  4 90            028            (((-65.63634 -26.89105, -65.63651 -26.88802, -6~
##  5 90            035            (((-65.51768 -27.54528, -65.51643 -27.54505, -6~
##  6 90            042            (((-65.69166 -27.53619, -65.69142 -27.53633, -6~
##  7 90            049            (((-65.56105 -27.61559, -65.56011 -27.61536, -6~
##  8 90            056            (((-65.24617 -26.99868, -65.22815 -27.00267, -6~
##  9 90            063            (((-65.43325 -26.81063, -65.43241 -26.81151, -6~
## 10 90            070            (((-65.92069 -26.98053, -65.9161 -26.98135, -65~
## 11 90            077            (((-65.9636 -27.40235, -65.96164 -27.40343, -65~
## 12 90            084            (((-65.1627 -26.79866, -65.16266 -26.79888, -65~
## 13 90            091            (((-65.35637 -27.18297, -65.35391 -27.18319, -6~
## 14 90            098            (((-66.10172 -26.21991, -66.08361 -26.23547, -6~
## 15 90            105            (((-65.71564 -26.51466, -65.71181 -26.51591, -6~
## 16 90            112            (((-65.54407 -26.09089, -65.54315 -26.09155, -6~
## 17 90            119            (((-65.25443 -26.78508, -65.25646 -26.78906, -6~
```


---

background-image: url(https://github.com/PoliticaArgentina/data_warehouse/raw/master/hex/geoAr.png)
background-position: 95% 5%
background-size: 10%

## Geometrías Argentinas 

### Aumentar data - [add_geo_codes()](https://politicaargentina.github.io/geoAr/index.html)



```r

add_geo_codes(TUCUMAN)
## Simple feature collection with 17 features and 8 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -66.18101 ymin: -28.01579 xmax: -64.48315 ymax: -26.05908
## Geodetic CRS:  WGS 84
## # A tibble: 17 x 9
##    codprov_censo coddepto_censo codprov coddepto nomdepto_censo  name_prov
##    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;    
##  1 90            007            23      013      BURRUYACU       TUCUMAN  
##  2 90            014            23      012      CRUZ ALTA       TUCUMAN  
##  3 90            021            23      005      CHICLIGASTA     TUCUMAN  
##  4 90            028            23      003      FAMAILLA        TUCUMAN  
##  5 90            035            23      009      GRANEROS        TUCUMAN  
##  6 90            042            23      007      JUAN B. ALBERDI TUCUMAN  
##  7 90            049            23      008      LA COCHA        TUCUMAN  
##  8 90            056            23      011      LEALES          TUCUMAN  
##  9 90            063            23      002      LULES           TUCUMAN  
## 10 90            070            23      004      MONTEROS        TUCUMAN  
## 11 90            077            23      006      RIO CHICO       TUCUMAN  
## 12 90            084            23      001      CAPITAL         TUCUMAN  
## 13 90            091            23      010      SIMOCA          TUCUMAN  
## 14 90            098            23      017      TAFI DEL VALLE  TUCUMAN  
## 15 90            105            23      016      TAFI VIEJO      TUCUMAN  
## 16 90            112            23      014      TRANCAS         TUCUMAN  
## 17 90            119            23      015      YERBA BUENA     TUCUMAN  
## # ... with 3 more variables: codprov_iso &lt;chr&gt;, name_iso &lt;chr&gt;,
## #   geometry &lt;MULTIPOLYGON [°]&gt;
```

---

class: center, inverse, middle

# [`{rmapshaper}`](https://github.com/ateucher/rmapshaper)




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
